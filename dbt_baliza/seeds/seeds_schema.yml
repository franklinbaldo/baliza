version: 2

seeds:
  - name: endpoints_config
    description: "Endpoint configuration seed table from endpoints.yaml - single source of truth"
    config:
      column_types:
        endpoint_name: varchar
        path: varchar
        description: varchar
        granularity: varchar
        page_size: integer
        modalidades: varchar 
        active: boolean
        supports_date_range: boolean
        date_params: varchar
    columns:
      - name: endpoint_name
        description: "Unique endpoint identifier"
        tests:
          - unique
          - not_null
      - name: path
        description: "API endpoint path"
        tests:
          - not_null
      - name: description
        description: "Human-readable endpoint description"
      - name: granularity
        description: "Date granularity for task planning (month, day, week)"
        tests:
          - accepted_values:
              values: ['month', 'day', 'week']
      - name: page_size
        description: "Default page size for API requests"
        tests:
          - not_null
      - name: modalidades
        description: "Comma-separated list of modalidade IDs (empty for no modalidades)"
      - name: active
        description: "Whether endpoint is currently active for extraction"
        tests:
          - not_null
      - name: supports_date_range
        description: "Whether endpoint supports date range queries"
        tests:
          - not_null
      - name: date_params
        description: "Comma-separated list of date parameter names"

  - name: modalidades_config
    description: "Modalidade enum mappings for data transformation"
    columns:
      - name: modalidade_id
        description: "Modalidade ID from PNCP API"
        tests:
          - unique
          - not_null
      - name: modalidade_nome
        description: "Human-readable modalidade name"
        tests:
          - not_null
      - name: active
        description: "Whether modalidade is currently active"
        tests:
          - not_null